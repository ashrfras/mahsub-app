ئورد الكل من سياق؛
ئورد بتشدبي، بتشمرفق من مكون.بتشدبي؛
ئورد الئان من تاريخ؛
ئورد مختطمستخدم من صنفمجال.مستخدم؛
ئورد الكل من صنفمجال.ئتيلات؛
ئعلن مركب مختطمتجر؛
ئعلن متجرجديد (نصية ئسمتجر، نصية ئسمسير، نصية بريدمسير، نصية نشاطتجاري) ك وعد منطق؛
ئعلن ردمتجر () ك وعد مختطمتجر؛
ئعلن مركب مختطمتجر:
	نصية _معرف،
	نصية _مراجعة،
	منطق _محدوف،
	بتشمرفق[] _مرفقات،
	نصية نوع،
	نصية رمزمتجر،
	نصية ئسمتجر،
	نصية نشاطتجاري،
	عدد تاريخئنشائ
تم

ئعلن متجرجديد (نصية ئسمتجر، نصية ئسمسير، نصية بريدمسير، نصية نشاطتجاري) ك وعد منطق:
	مختطمتجر متج = {
		_معرف: 'متجر'،
		نوع: 'متجر'،
		ئسمتجر: ئسمتجر،
		نشاطتجاري: نشاطتجاري،
		تاريخئنشائ: الئان()
	}؛
	مختطمستخدم مستخ = {
		_معرف: ئتيلات.ئستولدمعرف()،
		نوع: 'مستخدم'،
		ئسمكامل: ئسمسير،
		صلاحيات: 'مسئول'،
		بريدرقمي: بريدمسير،
		نشاطتجاري: نشاطتجاري
	}؛
	ريتما سياق.قابمحلي.خدفهرس(
		حقلين: ["نوع"]
	)؛
	ريتما سياق.قابمحلي.خدواحد(متج)؛
	ريتما سياق.قابمحلي.خدواحد(مستخ)؛
تم


ئعلن ردمتجر () ك وعد مختطمتجر:
	ئدا ليس سياق.قابمحلي:
		سياق.خدقابمحلي(بتشدبي(سياق.ئسمقاب))؛
	تم
	مختطمتجر نتج = ريتما سياق.قابمحلي.ئجلب('متجر')؛
	ئرجع نتج؛
تم