ئورد الكل من رياضيات؛
ئورد مجال من مصفوفة؛
ئورد الكل من سياق؛
ئورد نتجقاب، بتشمرفق، بتشدبي من مكون.بتشدبي؛
ئورد الكل من صنفمجال.ئتيلات؛
ئعلن مركب مختطمستخدم؛
ئعلن ردبمعرف (نصية معرفمستخدم) ك وعد مختطمستخدم؛
ئعلن ئرسلرمزتحقق (نصية بريد) ك نصية؛
ئعلن ئحفض (مختطمستخدم مستخ) ك وعد مختطمستخدم؛
ئعلن ئحدفبمعرف (نصية معرفمستخدم) ك وعد منطق؛
ئعلن ردجميع () ك وعد مختطمستخدم[]؛
ئعلن مركب مختطمستخدم:
	نصية _معرف،
	نصية _مراجعة،
	منطق _محدوف،
	بتشمرفق[] _مرفقات،
	نصية نوع،
	نصية ئسمكامل،
	تعداد صلاحيات [مسؤول، مسير، بائع]،
	نصية بريدرقمي،
	منطق لايحدف
تم

ئعلن ردبمعرف (نصية معرفمستخدم) ك وعد مختطمستخدم:
	مختطمستخدم مستخ = ريتما سياق.قابمحلي.ئجلب(معرفمستخدم)؛
	ئرجع مستخ؛
تم

ئعلن ئرسلرمزتحقق (نصية بريد) ك نصية:
	قل بريد؛
	نصية رمز = ''؛
	لكل ع في مجال(0، 3):
		رمز = رمز + رياضيات.ئستصغر(رياضيات.عشوائي() × 10)؛
	تم
	قل رمز؛
	ئرجع رمز؛
تم

ئعلن ئحفض (مختطمستخدم مستخ) ك وعد مختطمستخدم:
	ئدا ليس مستخ._معرف:
		مستخ._معرف = ئتيلات.ئستولدمعرف()؛
	تم
	مستخ.نوع = 'مستخدم'؛
	ريتما سياق.قابمحلي.ئوضع(مستخ)؛
تم

ئعلن ئحدفبمعرف (نصية معرفمستخدم) ك وعد منطق:
	مختطمستخدم مستخ = ريتما ردبمعرف(معرفمستخدم)؛
	ئدا مستخ.لايحدف:
		ئرجع خطئ؛
	وئلا:
		مستخ._محدوف = صحيح؛
		ريتما سياق.قابمحلي.ئوضع(مستخ)؛
		ئرجع صحيح؛
	تم
تم

ئعلن ردجميع () ك وعد مختطمستخدم[]:
	نتجقاب نتج = ريتما سياق.قابمحلي.ئستعلم(
		حدد: {
			نوع: 'مستخدم'
		})؛
		مختطمستخدم[] مستخي = نتج.وتيقات؛
		ئرجع مستخي؛
	تم
