ئورد الكل من سياق؛
ئورد نتجقاب، بتشدبي، بتشمرفق من مكون.بتشدبي؛
ئورد الكل ك ئتيلات من صنفمجال.ئتيلات؛
ئعلن مركب مختطمنتج؛
ئعلن ردبمعرف (نصية معرفمنتج) ك وعد مختطمنتج؛
ئعلن ئحفض (مختطمنتج منت) ك وعد مختطمنتج؛
ئعلن ردحيت (نصية مبحت؟، نصية تصنيف؟) ك وعد مختطمنتج[]؛
ئعلن مركب مختطمنتج:
	نصية _معرف،
	نصية _مراجعة،
	منطق _محدوف،
	نصية نوع،
	نصية ئسمنتج،
	عدد سعر،
	نصية[] ئسمبديلين
تم

ئعلن ردبمعرف (نصية معرفمنتج) ك وعد مختطمنتج:
	مختطمنتج منت = ريتما سياق.قابمحلي.ئجلب(معرفمنتج)؛
	ئرجع منت؛
تم
ئعلن ئحفض (مختطمنتج منت) ك وعد مختطمنتج:
	ئدا ليس منت._معرف:
		منت._معرف = ئتيلات.ئستولدمعرف()؛
	تم
	منت.نوع = 'منتج'؛
	ريتما سياق.قابمحلي.ئوضع(منت)؛
تم

ئعلن ردحيت (نصية مبحت؟، نصية تصنيف؟) ك وعد مختطمنتج[]:
	نتجقاب نتج = ريتما سياق.قابمحلي.ئستعلم(
		حدد: {
			نوع: 'منتج'
		}
	)؛
	مختطمنتج[] منجات = نتج.وتيقات؛
	ئرجع منجات؛
تم