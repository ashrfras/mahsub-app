ئورد مكون، عنصرمخصص، عنصرئشتمل، عنصرئدخال؛
ئورد مكون.طافية.طافية؛
ئورد الكل من تنسيق؛
ئورد المستند من مستند؛
ئورد مشهد.عنصر.عنصرمخزون؛
ئورد مختطمنتج من صنفمجال.منتج؛
ئورد الكل ك مجالمنتج من صنفمجال.منتج؛
ئورد مكون.غمازة؛
ئورد صحيحمننصية من عدد؛
ئعلن طفمنتج ()؛
ئعلن طفمنتج.حددت () ك وعد؛
ئعلن طفمنتج.ئغلقطافية ()؛
ئعلن طفمنتج.صيير ()؛
ئعلن طفمنتج.عندحفض () ك وعد؛
ئعلن مدخل ()؛
ئعلن طفمنتج ():
	يمدد مكون()؛
	يملك مركب {
		نصية معرفمنتج،
		عنصرمخزون عنصرمنت،
		مكون مكونتحديت
	} حالة = {
		معرفمنتج: عدم،
		عنصرمنت: عدم،
		مكونتحديت: عدم
	}؛
	يملك مختطمنتج منتج؛
تم

ئعلن طفمنتج.حددت () ك وعد:
	ئدا هدا.حالة.معرفمنتج:
		هدا.منتج = ريتما مجالمنتج.ردبمعرف(هدا.حالة.معرفمنتج)؛
	وئلا:
		هدا.منتج = عدم؛
	تم
	هدا.حددتمشهد()؛
	هدا.ئربطحدتين()؛
تم
ئعلن طفمنتج.ئغلقطافية ():
	طافية طف = المستند.ئستعلم('#طفتعديلمنتج')؛
	طف.ئخفي()؛
تم

ئعلن طفمنتج.صيير ():
	ئرجع (
		<قسم صنف="مخطط-طولي خلف-ئبيض">
			<صورة مصدر="ملفا/منتج.jpeg" صنف="فمقوسكب ط-48" سمة="object-fit:cover"></صورة>
			<قسم صنف="مخطط-طولي فجوة-2 هش-2">
				<قسم صنف="مخطط-عرضي ئصفف-وسط">
					<قسم صنف="ع-ئربعون">الاسم:</قسم>
					<ئدخال صنف="%{تنسيق.ئدخال} يملئ ط-8" قيمة="%{هدا.منتج.ئسمنتج ئدا هدا.منتج وئلا ''}"></ئدخال>
				</قسم>
				<قسم صنف="مخطط-عرضي ئصفف-وسط">
					<قسم صنف="ع-ئربعون">السعر:</قسم>
					<ئدخال صنف="%{تنسيق.ئدخال} يملئ ط-8" قيمة="%{هدا.منتج.سعر ئدا هدا.منتج وئلا ''}"></ئدخال>
				</قسم>
				<قسم صنف="مخطط-عرضي ئصفف-وسط">
					<قسم صنف="ع-ئربعون">المخزون:</قسم>
					<ئدخال صنف="%{تنسيق.ئدخال} يملئ ط-8"></ئدخال>
				</قسم>
				<قسم صنف="مخطط-عرضي ئصفف-وسط">
					<قسم صنف="ع-ئربعون">أسماء بديلة:</قسم>
					<ئدخال صنف="%{تنسيق.ئدخال} يملئ ط-8"></ئدخال>
				</قسم>
			</قسم>
			<قسم صنف="مخطط-عرضي فجوة-2 هش-2">
				<زرئدخ عندنقر="ئغلقطافية" ملصق="إلغاء" صنف="يملئ يكبر" تانوي></زرئدخ>
				<زرئدخ عندنقر="عندحفض" ملصق="حفظ" صنف="يملئ يكبر"></زرئدخ>
			</قسم>
		</قسم>
	)؛
تم

ئعلن طفمنتج.عندحفض () ك وعد:
	عنصرئدخال[] ئدخات = مصفوفة.ئنشئمن(هدا.ئستعلمكل((<ئدخال>)) ك مصفوفة)؛
	لكل ئدخ في ئدخات:
		ئدا ئدخ.قيمة == '':
			غمازة غمز = المستند.ئستعلم((<غمازة>))؛
			غمز.خدحالة({
				رسالة: 'يرجى ملئ جميع الحقول'
			})؛
			ئرجع؛
		تم
	تم
	مختطمنتج منت = هدا.منتج؛
	ئدا منت:
		#نحن نعددل منتج موجود؛
		منت.ئسمنتج = ئدخات[0].قيمة؛
		منت.سعر = صحيحمننصية(ئدخات[1].قيمة)؛
	وئلا:
		#نحن نضيف تصنيفا جديدا؛
		منت = {
			ئسمنتج: ئدخات[0].قيمة،
			سعر: ئدخات[1].قيمة
		}؛
	تم
	ريتما مجالمنتج.ئحفض(منت)؛
	
	ئدا هدا.حالة.عنصرمنت:
		هدا.حالة.عنصرمنت.خدحالة({
			ئسمنتج: منت.ئسمنتج،
			سعر: منت.سعر
		})؛
	تم
	
	ئدا هدا.حالة.مكونتحديت:
		هدا.حالة.مكونتحديت.حممل()؛
	تم
	
	هدا.ئغلقطافية()؛
تم

ئعلن مدخل ():
	عنصرمخصص.سججل('طفمنتج'، طفمنتج)؛
تم