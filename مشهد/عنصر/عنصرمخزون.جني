ئورد مكون، عنصرمخصص، عنصرئشتمل؛
ئورد المستند من مستند؛
ئورد مكون.طافية.طافية؛
ئورد مكون.غمازة؛
ئورد مشهد.طافية.طفنعملا؛
ئورد وضيفة؛
ئورد الكل ك مجالمنتج من صنفمجال.منتج؛
ئعلن عنصرمخزون ()؛
ئعلن عنصرمخزون._نقرخياحدف()؛
ئعلن عنصرمخزون._نقرخياتعديل ()؛
ئعلن عنصرمخزون.صيير ()؛
ئعلن عنصرمخزون.نقرخيا ()؛
ئعلن عنصرمخزون.نقرتئكيدحدف () ك وعد؛
ئعلن عنصرمخزون.عندحدتنقر (عنصرئشتمل عنص)؛
ئعلن عنصرمخزون._نقرخيامخزون ()؛
ئعلن مدخل ()؛
ئعلن عنصرمخزون ():
	يمدد مكون()؛
	يملك مركب {
		نصية معرفمنتج،
		نصية ئسمنتج،
		نصية سعر
	} حالة = {
		معرفمنتج: هدا.ردخاصية('معرفمنتج')،
		ئسمنتج: هدا.ردخاصية('ئسمنتج')،
		سعر: هدا.ردخاصية('سعر')
	}؛
	
	يملك وضيفة نقرخياتعديل = (هدا._نقرخياتعديل ك وضيفة).ئربط(هدا)؛
	يملك وضيفة نقرخياحدف = (هدا._نقرخياحدف ك وضيفة).ئربط(هدا)؛
	يملك وضيفة نقرخيامخزون = (هدا._نقرخيامخزون ك وضيفة).ئربط(هدا)؛
تم

ئعلن عنصرمخزون._نقرخياحدف():
	طافية طفخ = المستند.ئستعلم('#طفخيا')؛
	طفخ.ئحدفمستمعحدت('نقرحدف'، هدا.نقرخياحدف)؛
	طفخ.ئخفي()؛
	
	طافية طفنعلا = المستند.ئستعلم('#طفنعملا')؛
	طفنعلا.خدحالة({
		جسم: 'طفنعملا'،
		بيا: {
			رسالة: 'هل أنت متأكد من رغبتك في حذف هذا المنتج؟'،
			عندلا: (دالة(): طفنعلا.ئخفي())،
			عندنعم: هدا.نقرتئكيدحدف،
			مرجع: هدا
		}
	})؛
تم

ئعلن عنصرمخزون._نقرخياتعديل ():
	طافية طفخ = المستند.ئستعلم('#طفخيا')؛
	طفخ.ئحدفمستمعحدت('نقرتعديل'، هدا.نقرخياتعديل)؛
	طفخ.ئخفي()؛
	
	طافية طف = المستند.ئستعلم('#طفتعديلمنتج')؛
	طف.خدحالة({
		جسم: 'طفمنتج'،
		بيا: {
			معرفمنتج: هدا.حالة.معرفمنتج،
			عنصرمنت: هدا
		}
	})؛
تم

ئعلن عنصرمخزون.صيير ():
	ئرجع (
		<قسم صنف="مقوسكب خلف-ئبيض ئطار-رمادي-300 تئشير:ضلصغ مخطط-طولي">
			<صورة مصدر="ملفا/منتج.jpeg" صنف="فمقوسكب ط-32" سمة="object-fit:cover"></صورة>
			<قسم صنف="مخطط-عرضي فجوة-1 ئرصف-بين ئصفف-وسط هش-2">
				<قسم صنف="مخطط-طولي">
					<حيز صنف="خطسميك حشتح-1">%{هدا.حالة.ئسمنتج}</حيز>
					<قسم صنف="مخطط-عرضي فجوة-3 نصصغ ئصفف-وسط">
						<حيز صنف="ع-10 ئقصع-10 ئدنع-10">السعر:</حيز>
						<حيز صنف="يملئ">%{هدا.حالة.سعر}</حيز>
					</قسم>
				</قسم>
				<ئيقو عندنقر="نقرخيا" ئسم="تلاتنقط-ئفقي-دائرة" صنف="نصكجج حيادي-800"></ئيقو>
			</قسم>
		</قسم>
	)؛
تم

ئعلن عنصرمخزون.نقرخيا ():
	طافية طفخ = المستند.ئستعلم('#طفخيا')؛
	طفخ.خدحالة({
		جسم: 'طفخيا'
	})؛
	طفخ.ئضفمستمعحدت('نقرتعديل'، هدا.نقرخياتعديل)؛
	طفخ.ئضفمستمعحدت('نقرحدف'، هدا.نقرخياحدف)؛
	طفخ.ئضفمستمعحدت('نقرمخزون'، هدا.نقرخيامخزوز)؛
تم

ئعلن عنصرمخزون.نقرتئكيدحدف () ك وعد:
	ريتما مجالمنتج.ئحدفبمعرف(هدا.حالة.معرفمنتج)؛
	طافية طفخ = المستند.ئستعلم('#طفخيا')؛
	طفخ.ئخفي()؛
	
	غمازة غمز = المستند.ئستعلم((<غمازة>))؛
	غمز.خدحالة({
		رسالة: 'تم حذف المنتج'
	})؛
	هدا.ئسمصنف = هدا.ئسمصنف + ' بلاعرض:هام'؛
تم

ئعلن عنصرمخزون.عندحدتنقر (عنصرئشتمل عنص):
	طافية طف = المستند.ئستعلم('#طفتعديلمنتج')؛
	طف.خدحالة({
		جسم: 'طفمنتج'
	})؛
تم

ئعلن عنصرمخزون._نقرخيامخزون ():
	طافية طفخ = المستند.ئستعلم('#طفخيا')؛
	طفخ.ئحدفمستمعحدت('نقرمخزون'، هدا.نقرخيامخزون)؛
	طفخ.ئخفي()؛
	قل 'مخزون'؛
تم

ئعلن مدخل ():
	عنصرمخصص.سججل('عنصرمخزون'، عنصرمخزون)؛
تم