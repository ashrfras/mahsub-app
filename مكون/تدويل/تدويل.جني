ئورد مكون، عنصرمخصص، جواب؛
ئورد المستند من مستند؛
ئورد المتصفح من متصفح؛
ئورد النافدة، تخزينمحلي من نافدة؛
ئورد عنصر، خاصيةعنصر؛
ئعلن مركب عنصرترجمة؛
ئعلن تدويل ()؛
ئعلن تدويل.ئجلبملف () ك وعد عنصرترجمة[]؛
ئعلن تدويل.ترجم (نصية مفتاح) ك نصية؛
ئعلن تدويل.ئفرضلغة (نصية لغ)؛
ئعلن تدويل.ت (نصية مفتاح) ك نصية؛
ئعلن تدويل.ردلغة ()؛
ئعلن تدويل.صيير ()؛
ئعلن تدويل.ئضبطسمة ()؛
ئعلن تدويل.حممل () ك وعد؛
ئعلن تدويل.حددت ()؛
ئعلن مدخل ()؛
ئعلن تدويل؛
ئعلن مركب عنصرترجمة:
	نصية معرف،
	نصية قيمة
تم
ئعلن تدويل ():
	يمدد مكون()؛
	
	يملك نصية عنونت = هدا.ردخاصية('عنونت')؛
	يملك نصية ئسملغة = هدا.ردلغة()؛
	يملك نصية لغةمفترضة = هدا.ردخاصية('مفترض')؛
	يملك نصية منحا = 'ltr'؛
	يملك منطق هليحملسمة = ليس هدا.لهخاصية('لايحملسمة')؛
	يملك نصية ئتجاه؛
	يملك منطق تمتحميل = خطئ؛
	يملك عنصرترجمة[] ملفلغة = عدم؛

	يملك مركب {
		منطق تمتحميل
	} حالة = {
		تمتحميل: خطئ
	}؛
	
	ئدا (['ar', 'he', 'fa', 'ur']).يتضمن(هدا.ئسملغة):
		هدا.منحا = 'rtl'؛
	تم
	
	هدا.ئتجاه = 'يسار' ئدا هدا.منحا == 'lt' وئلا 'يمين'؛
	
	المستند.جدر.خدخاصية('lang'، هدا.ئسملغة)؛
	المستند.جدر.خدخاصية('dir'، هدا.منحا)؛
تم
ئعلن تدويل.ئجلبملف () ك وعد عنصرترجمة[]:
	ئدا هدا.تمتحميل:
		ئرجع عدم؛
	تم
	ئدا ليس هدا.عنونت:
		ئرجع عدم؛
	تم
	
	جواب جو؛
	عنصرترجمة[] نتج؛
	حاول:
		جو = ريتما ئجلب ("%{هدا.عنونت}/%{هدا.ئسملغة}.جزن")؛
	ئستدرك:
		ئرجع عدم؛
	تم
	
	ئدا جو وو (جو.حالة == 200):
		نتج = ريتما جو.جيزن()؛
		ئرجع نتج؛
	وئلا:
		ئرجع عدم؛
	تم
تم

ئعلن تدويل.ترجم (نصية مفتاح) ك نصية:
	ئدا هدا.ملفلغة:
		عنصرترجمة ترجمة = هدا.ملفلغة.ئوجد(دالة(عنصرترجمة عنصر): عنصر.معرف == مفتاح)؛
		ئرجع ترجمة.قيمة ئدا ترجمة وئلا مفتاح؛
	وئلا:
		ئرجع مفتاح؛
	تم
تم
ئعلن تدويل.ئفرضلغة (نصية لغ):
	تخزينمحلي.خدعنصر('لغتدويل'، لغ)؛
	النافدة.موقع.ئعدتحميل()؛
تم
ئعلن تدويل.ت (نصية مفتاح) ك نصية:
	ئرجع هدا.ترجم(مفتاح)؛
تم
ئعلن تدويل.ردلغة ():
	نصية لغةمتصفح = المتصفح.لغة.قسسم('-')[0]؛
	نصية لغةمختارة = (تخزينمحلي.ردعنصر('لغتدويل')) ئو (هدا.لغةمفترضة)؛
	ئرجع لغةمختارة ئدا لغةمختارة وئلا لغةمتصفح؛
تم
ئعلن تدويل.صيير ():
	ئرجع (
		<قسم صنف="مخطط ئصفف-وسط ئرصف-وسط ستارتدويل ط-شاشة ع-شاشة خلف-ئسود">
		</قسم>
		<فجوة></فجوة>
	)؛
تم
ئعلن تدويل.ئضبطسمة ():
	ئدا (هدا.تمتحميل) ئو (ليس هدا.هليحملسمة):
		ئرجع؛
	تم
	نصية[] عنصرين = هدا.ملفلغة.رششح(دالة(عنصرترجمة عنصر): عنصر.معرف == 'سمة')؛
	لكل عنصر في عنصرين:
		ئدا ليس المستند.رئس.ئشتملداخلي.يتضمن(عنصر.قيمة):
			المستند.رئس.ئشتملداخلي = المستند.رئس.ئشتملداخلي + (<link rel="stylesheet" href="%{عنصر.قيمة}"></link>)؛
		تم
	تم
تم
ئعلن تدويل.حممل () ك وعد:
	حاول:
		هدا.ملفلغة = ريتما هدا.ئجلبملف()؛
		هدا.ئضبطسمة()؛
	ئستدرك ف ك فشل:
		هدا.تمتحميل = صحيح؛
		هدا.خدحالة({
			تمتحميل: صحيح
		})؛
	تم
تم
ئعلن تدويل.حددت ():
	هدا.حددتمشهد()؛
	عنصر[] مترجمات = المستند.ئستعلمكل('[ترجم]')؛
	لكل مترجمة في مترجمات:
		نصية ترجمادا = مترجمة.ردخاصية('ترجم')؛
		ئدا (ترجمادا == 'كل') ئو (ترجمادا == 'محتفقط'):
			عنصر.ئشتملداخلي = هدا.ترجم(عنصر.ئشتملداخلي)؛
		تم
		ئدا (ترجمادا == 'كل') ئو (ترجمادا == 'خاصفقط'):
			لكل خاصية في مترجمة.خاصيات:
				خاصية.قيمة = هدا.ترجم(خاصية.قيمة)؛
			تم
		تم
	تم
	لكل عنصر في هدا.ئستعلمكل('.ستارتدويل'):
		عنصر.ئحدف()؛
	تم
تم
ئعلن مدخل ():
	عنصرمخصص.سججل('تدويل'، تدويل)؛
تم