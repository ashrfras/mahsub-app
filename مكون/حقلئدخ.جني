ئورد مكون، عنصرمخصص، عنصرئدخال؛
ئورد رجكس؛
ئعلن حقلئدخ ()؛
ئعلن حقلئدخ.ئفحص () ك منطق؛
ئعلن حقلئدخ.ردقيمة () ك نصية؛
ئعلن حقلئدخ.صيير ()؛
ئعلن مدخل ()؛
ئعلن حقلئدخ ():
	يمدد مكون ()؛
	
	يملك مركب {نصية رساخطئ} حالة = {رساخطئ: ''}؛
	
	يملك نصية ملصق = هدا.ردخاصية('ملصق')؛
	يملك نصية ستنب = هدا.ردخاصية('ستنب')؛
	يملك نصية ئسم = هدا.ردخاصية('ئسم')؛
	يملك نصية قيمة = هدا.ردخاصية('قيمة') ئو ''؛
	يملك منطق هلمعطل = هدا.لهخاصية('معطل')؛
	يملك منطق هلئجباري = هدا.لهخاصية('ئجباري')؛
	يملك تعداد نوع [نص، عدد، بريد، هاتف، رابط] = هدا.ردخاصية('نوع') ئو 'نص'؛
تم

ئعلن حقلئدخ.ئفحص () ك منطق:
	هدا.خدحالة({رساخطئ: ''})؛
	ئدا هدا.ردقيمة() == '':
		ئدا هدا.هلئجباري:
			هدا.خدحالة({رساخطئ: 'يرجى إدخال قيمة لهذا الحقل'})؛
			ئرجع خطئ؛
		وئلا:
			ئرجع صحيح؛
		تم
	تم
	ئدا هدا.نوع == 'بريد':
		رجكس رج = رجكس('^((?!\\.)[\\w-_.]*[^.])(@\\w+)(\\.\\w+(\\.\\w+)?[^.\\W])$'، 'gim')؛
		ئدا ليس رج.ئختبر(هدا.ردقيمة()):
			هدا.خدحالة({رساخطئ: 'صيغة البريد الرقمي غير صحيحة'})؛
			ئرجع خطئ؛
		تم
		ئرجع صحيح؛
	تم
	ئدا هدا.نوع == 'هاتف':
		رجكس رج = رجكس('^([+]?\\d{1,2}[-\\s]?|)\\d{3}[-\\s]?\\d{3}[-\\s]?\\d{4}$')؛
		ئدا ليس رج.ئختبر(هدا.ردقيمة()):
			هدا.خدحالة({رساخطئ: 'صيغة رقم الهاتف غير صحيحة'})؛
			ئرجع خطئ؛
		تم
		ئرجع صحيح؛
	تم
	ئدا هدا.نوع == 'رابط':
		رجكس رج = رجكس('^([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+\\.[a-zA-Z]{2,}(/[^ ]*)?$')؛
		ئدا ليس رج.ئختبر(هدا.ردقيمة()):
			هدا.خدحالة({رساخطئ: 'صيغة الرابط غير صحيحة'})؛
			ئرجع خطئ؛
		تم
		ئرجع صحيح؛
	تم
	ئرجع صحيح؛
تم

ئعلن حقلئدخ.ردقيمة () ك نصية:
	عنصرئدخال ئدخ = هدا.ئستعلم((<ئدخال>))؛
	ئرجع ئدخ.قيمة؛
تم

ئعلن حقلئدخ.صيير ():
	ئرجع (
		<شرط>
			<عند تحقق="هدا.ملصق">
				<قسم صنف="مخطط-طولي">
					<حيز صنف="نصصغ">%{هدا.ملصق}</حيز>
					<شرط>
						<عند تحقق="هدا.هلمعطل">
							<ئدخال disabled نوع="نص" قيمة="%{هدا.قيمة}" ستنب="%{هدا.ستنب}" صنف="رمادي-500 ط-12 خلف-ئبيض مقوس ئطار-1 ئطار-رمادي-400 حشس-2"></ئدخال>
						</عند>
						<عند غيره>
							<ئدخال نوع="نص" قيمة="%{هدا.قيمة}" ستنب="%{هدا.ستنب}" صنف="ط-12 خلف-ئبيض مقوس ئطار-1 ئطار-رمادي-400 حشس-2"></ئدخال>
						</عند>
					</شرط>
				</قسم>
			</عند>
			<عند غيره>
				<ئدخال %{'disabled' ئدا هدا.معطل وئلا ''} نوع="نص" قيمة="%{هدا.قيمة}" ستنب="%{هدا.ستنب}" صنف="ط-12 خلف-ئبيض مقوس ئطار-1 ئطار-رمادي-400 حشس-2"></ئدخال>
			</عند>
		</شرط>
		<حالة>
			<شرط>
				<عند تحقق="هدا.حالة.رساخطئ لا= ''">
					<حيز صنف="نصصج ئحمر-600">%{هدا.حالة.رساخطئ}</حيز>
				</عند>
			</شرط>
		</حالة>
	)؛
تم

ئعلن مدخل ():
	عنصرمخصص.سججل('حقلئدخ'، حقلئدخ)؛
تم
