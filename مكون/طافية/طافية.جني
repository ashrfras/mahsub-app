ئورد مكون، عنصرمخصص، عنصر، عنصرئشتمل؛
ئورد حدت، حدتمخصص؛
ئورد المستند من مستند؛
ئورد ئيقو من مكون.ئيقو؛
ئورد CustomEvent من '//'؛
ئعلن طافية ()؛
ئعلن مدخل ()؛
ئعلن طافية.ئضهر ()؛
ئعلن طافية.ئخفيطافية (عنصرئشتمل هدف = عدم، حدت حد = عدم)؛
ئعلن طافية.ئخفي ()؛
ئعلن طافية.حددت ()؛
ئعلن طافية.صيير ()؛
ئعلن طافية ():
	يمدد مكون()؛
	
	يملك مركب {
		نصية جسم،
		نصية عنوان،
		نصية تحتعنوان،
		منطق تابتة،
		منطق ضاهر،
		مركب بيا
	} حالة = {
		جسم: عدم،
		عنوان: عدم،
		تحتعنوان: عدم،
		تابتة: خطئ،
		بيا: عدم،
		ضاهر: خطئ
	}؛
	
	يملك تعداد موضع [وسط]؛
	يملك تعداد حجم [عادي، كبير، ملئ]؛
	يملك منطق تابتة؛
	
	يملك حدت عندئغلاق؛
	يملك حدت عندضهور؛
	
	هدا.موضع = هدا.ردخاصية('موضع') ئو 'وسط'؛
	هدا.حجم = هدا.ردخاصية('حجم') ئو 'عادي'؛
	هدا.تابتة = هدا.لهخاصية('تابتة')؛
تم
ئعلن طافية.صيير ():
	نصية حجم؛
	ئدا هدا.حجم == 'عادي':
		حجم = 'مت:ع-164 ع-ئلاربع ئقصط-خمسمئة ئدنط-تلاتمئة'؛
	وئلا ئدا هدا.حجم == 'ملئ':
		حجم = 'ع-شاشة ط-شاشة'؛
	وئلا ئدا هدا.حجم == 'كبير':
		حجم = 'مت:ع-220 ع-تسعون ئقصط-خمسمئة ئدنط-تلاتمئة'؛
	تم
	ئرجع (
		<شرط>
			<عند تحقق="\(هدا.حالة.جسم لا= عدم\) ئو \(هدا.حالة.ضاهر\)">
				<قسم صنف="موضعتابت فوق-0 يمين-0 ط-شاشة ع-شاشة خلف-ئسود شفافية50 محورض2000"></قسم>
				<قسم صنف="مخطط ئصفف-وسط ئرصف-وسط طافيتستار موضعتابت فوق-0 يمين-0 ط-شاشة ع-شاشة محورض2000" عندنقر="ئخفيطافية">
					<قسم صنف="حش-4 مخطط-طولي فجوة-3 خلف-ئبيض ئسود داكن:ئبيض داكن:خلف-حيادي-800 %{حجم} %{هدا.ردخاصية\('عنصر-بطاقة'\) ئو ''}">
					
						<شرط>
							<عند تحقق="هدا.حالة.عنوان لا= عدم">
								<قسم صنف="مخطط-عرضي ئصفف-وسط ئرصف-بين حشتح-4">
									<قسم صنف="مخطط-طولي فجوة-2">
										<حيز صنف="نصكج %{هدا.ردخاصية\('عنصر-عنوان'\) ئو ''}">%{هدا.حالة.عنوان}</حيز>
										<شرط>
											<عند تحقق="هدا.حالة.تحتعنوان لا= عدم">
												<حيز صنف="نصصج">%{هدا.حالة.تحتعنوان}</حيز>
											</عند>
										</شرط>
									</قسم>
									<ئيقو ئسم="علامة-ئكس" صنف="نصكجج مئشر-سبابة داكن:ئبيض" عندنقر="ئخفي"></ئيقو>
								</قسم>
							</عند>
						</شرط>
						
						<جسمطاف>
							<فجوة></فجوة>
						</جسمطاف>
					
					</قسم>
				</قسم>
			</عند>
		</شرط>
	)؛
تم
ئعلن طافية.ئضهر ():
	هدا.خدحالة({
		ضاهر: صحيح
	})؛
	هدا.ئطلقحدت(حدت('ضهورطافية'، {يتصاعد: صحيح}))؛
تم
ئعلن طافية.ئخفي ():
	طافية[] طافيات = المستند.ئستعلمكل((<طافية>))؛
	لكل طف في طافيات:
		طف.خدحالة({
			عنوان: عدم،
			تحتعنوان: عدم،
			جسم: عدم،
			تابتة: خطئ،
			ضاهر: خطئ
		})؛
	تم
	هدا.ئطلقحدت(حدت('ئغلاقطافية'، {يتصاعد: صحيح}))؛
تم
ئعلن طافية.ئخفيطافية (عنصرئشتمل هدف = عدم، حدت حد = عدم):
	طافية[] طافيات = المستند.ئستعلمكل((<طافية>))؛
	منطق هلئخفا = خطئ؛
	لكل طف في طافيات:
		منطق هلتابتة = طف.تابتة ئو طف.حالة.تابتة؛
		ئدا (ليس هلتابتة) وو (حد.ردهدف() == طف.ئستعلم('.طافيتستار')):
			طف.خدحالة({
				عنوان: عدم،
				تحتعنوان: عدم،
				جسم: عدم،
				تابتة: خطئ،
				ضاهر: خطئ
			})؛
			هلئخفا = صحيح؛
		تم
	تم
	ئدا هلئخفا:
		هدا.ئطلقحدت(حدت('ئغلاقطافية'، {يتصاعد: صحيح}))؛
	تم
تم
ئعلن طافية.حددت ():
	هدا.حددتمشهد()؛
	عنصر جسمطاف = هدا.ئستعلم((<جسمطاف>))؛
	ئدا (جسمطاف لا= عدم) وو (هدا.حالة.جسم لا= عدم):
		ئدا هدا.حالة.جسم.يتضمن('<'):
			جسمطاف.ئشتملداخلي = هدا.حالة.جسم؛
		وئلا:
			مكون عنص = المستند.ئنشئعنصر(هدا.حالة.جسم)؛
			ئدا هدا.حالة.بيا:
				عنص.حالة = هدا.حالة.بيا؛
			تم
			جسمطاف.عووضب([عنص])؛
		تم
	تم	
	هدا.ئربطحدتين()؛
تم
ئعلن مدخل ():
	عنصرمخصص.سججل('طافية'، طافية)؛
تم